<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <title>ë°˜ì§ë°˜ì§ ìš°ì£¼ íƒ€ì ì—¬í–‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- ê·€ì—¬ìš´ í•œê¸€ í°íŠ¸ (êµ¬ê¸€ ì›¹í°íŠ¸) -->
  <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-gradient: radial-gradient(circle at 50% 10%, #2b1055 0%, #7597de 100%);
      --glass-bg: rgba(255, 255, 255, 0.15);
      --glass-border: 1px solid rgba(255, 255, 255, 0.3);
      --neon-blue: #00f3ff;
      --neon-pink: #ff00de;
      --neon-yellow: #ffe600;
      --text-color: #fff;
    }

    * {
      box-sizing: border-box;
      user-select: none;
    }

    body {
      margin: 0;
      padding: 0;
      background: #0f0c29;
      background: linear-gradient(to bottom, #24243e, #302b63, #0f0c29);
      color: var(--text-color);
      font-family: 'Jua', sans-serif;
      /* ê·€ì—¬ìš´ í°íŠ¸ ì ìš© */
      overflow: hidden;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* ë³„ ë°°ê²½ ì• ë‹ˆë©”ì´ì…˜ */
    .stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
      background-image:
        radial-gradient(2px 2px at 20px 30px, #eee, rgba(0, 0, 0, 0)),
        radial-gradient(2px 2px at 40px 70px, #fff, rgba(0, 0, 0, 0)),
        radial-gradient(2px 2px at 50px 160px, #ddd, rgba(0, 0, 0, 0)),
        radial-gradient(2px 2px at 90px 40px, #fff, rgba(0, 0, 0, 0));
      background-size: 200px 200px;
      animation: twinkle 4s linear infinite;
    }

    @keyframes twinkle {
      from {
        transform: translateY(0);
      }

      to {
        transform: translateY(-200px);
      }
    }

    /* === ìƒë‹¨ í—¤ë” === */
    header {
      z-index: 10;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(5px);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    h1 {
      margin: 0;
      font-size: 24px;
      background: linear-gradient(to right, var(--neon-blue), var(--neon-pink));
      -webkit-background-clip: text;
      color: transparent;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
    }

    .status-panel {
      display: flex;
      gap: 20px;
      font-size: 20px;
    }

    .badge {
      padding: 5px 15px;
      border-radius: 20px;
      background: var(--glass-bg);
      border: var(--glass-border);
    }

    .heart {
      color: #ff4757;
      text-shadow: 0 0 5px #ff4757;
    }

    /* === ê²Œì„ ì˜ì—­ === */
    #game-area {
      position: relative;
      flex: 1;
      z-index: 1;
      overflow: hidden;
    }

    /* ë–¨ì–´ì§€ëŠ” ì  (UFO) ìŠ¤íƒ€ì¼ */
    .enemy {
      position: absolute;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: top 0.1s linear;
      filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.5));
    }

    .enemy svg {
      width: 70px;
      height: 70px;
      animation: wobble 2s infinite ease-in-out;
    }

    .enemy-text {
      margin-top: -10px;
      padding: 4px 12px;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid var(--neon-yellow);
      border-radius: 15px;
      color: #fff;
      font-size: 22px;
      z-index: 2;
      text-shadow: 1px 1px 0 #000;
    }

    @keyframes wobble {

      0%,
      100% {
        transform: rotate(-5deg);
      }

      50% {
        transform: rotate(5deg);
      }
    }

    /* í­ë°œ íš¨ê³¼ */
    .explosion {
      position: absolute;
      pointer-events: none;
      animation: pop 0.4s ease-out forwards;
      font-size: 40px;
    }

    @keyframes pop {
      0% {
        transform: scale(0.5);
        opacity: 1;
      }

      100% {
        transform: scale(2);
        opacity: 0;
      }
    }

    /* === í•˜ë‹¨ ì…ë ¥ & í‚¤ë³´ë“œ === */
    #bottom-ui {
      z-index: 20;
      background: rgba(20, 20, 35, 0.9);
      padding: 15px;
      border-top: 2px solid rgba(255, 255, 255, 0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .input-container {
      position: relative;
      width: 100%;
      max-width: 500px;
    }

    #input-box {
      width: 100%;
      padding: 10px 20px;
      font-family: 'Jua', sans-serif;
      font-size: 26px;
      text-align: center;
      background: rgba(255, 255, 255, 0.1);
      border: 3px solid var(--neon-blue);
      border-radius: 50px;
      color: white;
      outline: none;
      box-shadow: 0 0 15px rgba(0, 243, 255, 0.3);
      transition: all 0.2s;
    }

    #input-box:focus {
      background: rgba(0, 243, 255, 0.1);
      transform: scale(1.02);
    }

    /* ê°€ìƒ í‚¤ë³´ë“œ */
    .keyboard {
      display: flex;
      flex-direction: column;
      gap: 5px;
      padding: 10px;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 15px;
    }

    .row {
      display: flex;
      justify-content: center;
      gap: 5px;
    }

    .key {
      width: 40px;
      height: 45px;
      background: #2d3436;
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: #dfe6e9;
      border-bottom: 3px solid #181b1c;
      transition: all 0.1s;
    }

    .key.active {
      background: var(--neon-pink);
      color: #fff;
      transform: translateY(3px);
      border-bottom: 0;
      box-shadow: 0 0 10px var(--neon-pink);
    }

    .key span.main {
      font-size: 16px;
      color: #fff;
    }

    .key span.sub {
      font-size: 10px;
      opacity: 0.6;
    }

    .key.space {
      width: 250px;
    }

    /* === ì˜¤ë²„ë ˆì´ (ì‹œì‘/ì¢…ë£Œ/ë ˆë²¨ì„ íƒ) === */
    .overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(15, 12, 41, 0.9);
      backdrop-filter: blur(8px);
      z-index: 100;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    .overlay h2 {
      font-size: 50px;
      margin-bottom: 10px;
      color: var(--neon-yellow);
      text-shadow: 0 0 20px var(--neon-yellow);
    }

    .overlay p {
      font-size: 20px;
      color: #ccc;
      margin-bottom: 40px;
    }

    .level-container {
      display: flex;
      gap: 20px;
    }

    .btn {
      padding: 15px 30px;
      font-family: 'Jua', sans-serif;
      font-size: 24px;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      color: #fff;
      text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.3);
    }

    .btn:hover {
      transform: scale(1.1);
    }

    .btn-easy {
      background: linear-gradient(45deg, #00b09b, #96c93d);
      box-shadow: 0 5px 15px rgba(0, 176, 155, 0.4);
    }

    .btn-normal {
      background: linear-gradient(45deg, #ff9966, #ff5e62);
      box-shadow: 0 5px 15px rgba(255, 94, 98, 0.4);
    }

    .btn-hard {
      background: linear-gradient(45deg, #833ab4, #fd1d1d);
      box-shadow: 0 5px 15px rgba(253, 29, 29, 0.4);
    }

    .hidden {
      display: none !important;
    }
  </style>
</head>

<body>

  <div class="stars"></div>

  <header>
    <h1>
      <a href="index.html" style="text-decoration:none; margin-right:10px; font-size:20px;">ğŸ”™</a>
      ğŸ›¸ ë°˜ì§ë°˜ì§ ìš°ì£¼ íƒ€ì
    </h1>
    <div class="status-panel">
      <div class="badge">ì ìˆ˜: <span id="score">0</span></div>
      <div class="badge">ë ˆë²¨: <span id="level-display">ì‰¬ì›€</span></div>
      <div class="badge">ìƒëª…: <span id="lives" class="heart">â¤â¤â¤â¤â¤</span></div>
    </div>
  </header>

  <!-- ê²Œì„ í™”ë©´ -->
  <div id="game-area" onclick="focusInput()"></div>

  <!-- ì˜¤ë²„ë ˆì´: ì‹œì‘ í™”ë©´ -->
  <div id="start-screen" class="overlay">
    <h2>ìš°ì£¼ íƒ€ì ì—¬í–‰</h2>
    <p>ê·€ì—¬ìš´ ì™¸ê³„ì¸ ì¹œêµ¬ë“¤ì´ ë‚±ë§ì„ ê°€ì§€ê³  ë‚´ë ¤ì™€ìš”!<br>íƒ€ìë¥¼ ì³ì„œ ì¹œêµ¬ë“¤ì„ ë§ì´í•´ì£¼ì„¸ìš”.</p>
    <div class="level-container">
      <button class="btn btn-easy" onclick="startGame('easy')">ì‰¬ì›€ (ì´ˆê¸‰)</button>
      <button class="btn btn-normal" onclick="startGame('normal')">ë³´í†µ (ì¤‘ê¸‰)</button>
      <button class="btn btn-hard" onclick="startGame('hard')">ì–´ë ¤ì›€ (ê³ ê¸‰)</button>
    </div>
  </div>

  <!-- ì˜¤ë²„ë ˆì´: ê²Œì„ ì˜¤ë²„ -->
  <div id="gameover-screen" class="overlay hidden">
    <h2>ê²Œì„ ì¢…ë£Œ!</h2>
    <p id="final-score-msg">ì ìˆ˜: 0ì </p>
    <button class="btn btn-normal" onclick="resetGame()">ë‹¤ì‹œ í•˜ê¸°</button>
  </div>

  <!-- í•˜ë‹¨ ì»¨íŠ¸ë¡¤ -->
  <div id="bottom-ui">
    <div class="input-container">
      <input type="text" id="input-box" placeholder="ì—¬ê¸°ì— ë‚±ë§ì„ ì…ë ¥í•˜ì„¸ìš”!" autocomplete="off">
    </div>

    <div class="keyboard">
      <!-- ìíŒì€ JSë¡œ ë Œë”ë§í•˜ì§€ ì•Šê³  HTMLì— ë°•ì•„ë‘  (ê°€ë…ì„± ìœ„í•´) -->
      <div class="row">
        <div class="key" data-key="q"><span class="main">ã…‚</span><span class="sub">Q</span></div>
        <div class="key" data-key="w"><span class="main">ã…ˆ</span><span class="sub">W</span></div>
        <div class="key" data-key="e"><span class="main">ã„·</span><span class="sub">E</span></div>
        <div class="key" data-key="r"><span class="main">ã„±</span><span class="sub">R</span></div>
        <div class="key" data-key="t"><span class="main">ã……</span><span class="sub">T</span></div>
        <div class="key" data-key="y"><span class="main">ã…›</span><span class="sub">Y</span></div>
        <div class="key" data-key="u"><span class="main">ã…•</span><span class="sub">U</span></div>
        <div class="key" data-key="i"><span class="main">ã…‘</span><span class="sub">I</span></div>
        <div class="key" data-key="o"><span class="main">ã…</span><span class="sub">O</span></div>
        <div class="key" data-key="p"><span class="main">ã…”</span><span class="sub">P</span></div>
      </div>
      <div class="row">
        <div class="key" data-key="a"><span class="main">ã…</span><span class="sub">A</span></div>
        <div class="key" data-key="s"><span class="main">ã„´</span><span class="sub">S</span></div>
        <div class="key" data-key="d"><span class="main">ã…‡</span><span class="sub">D</span></div>
        <div class="key" data-key="f"><span class="main">ã„¹</span><span class="sub">F</span></div>
        <div class="key" data-key="g"><span class="main">ã…</span><span class="sub">G</span></div>
        <div class="key" data-key="h"><span class="main">ã…—</span><span class="sub">H</span></div>
        <div class="key" data-key="j"><span class="main">ã…“</span><span class="sub">J</span></div>
        <div class="key" data-key="k"><span class="main">ã…</span><span class="sub">K</span></div>
        <div class="key" data-key="l"><span class="main">ã…£</span><span class="sub">L</span></div>
      </div>
      <div class="row">
        <div class="key" data-key="z"><span class="main">ã…‹</span><span class="sub">Z</span></div>
        <div class="key" data-key="x"><span class="main">ã…Œ</span><span class="sub">X</span></div>
        <div class="key" data-key="c"><span class="main">ã…Š</span><span class="sub">C</span></div>
        <div class="key" data-key="v"><span class="main">ã…</span><span class="sub">V</span></div>
        <div class="key" data-key="b"><span class="main">ã… </span><span class="sub">B</span></div>
        <div class="key" data-key="n"><span class="main">ã…œ</span><span class="sub">N</span></div>
        <div class="key" data-key="m"><span class="main">ã…¡</span><span class="sub">M</span></div>
      </div>
      <div class="row">
        <div class="key space" data-key=" "><span class="sub">Space</span></div>
      </div>
    </div>
  </div>

  <script>
    // === ë‹¨ì–´ ë°ì´í„° (ìˆ˜ì¤€ë³„) ===
    const WORDS = {
      easy: [ // ë°›ì¹¨ ì—†ê±°ë‚˜ ì‰¬ìš´ ë‹¨ì–´ ìœ„ì£¼
        "ê°€ìˆ˜", "ë‚˜ë¹„", "ë‹¤ë¦¬", "ë¼ë””ì˜¤", "ë§ˆì°¨", "ë°”ì§€", "ì‚¬ì", "ì•„ê¸°", "ìë‘", "ì°¨í‘œ",
        "ì¹´ë©”ë¼", "íƒ€ì¡°", "íŒŒë¦¬", "í•˜ë§ˆ", "ì˜¤ë¦¬", "í¬ë„", "ìš°ìœ ", "ëª¨ì", "êµ¬ë‘", "ëˆ„ë‚˜",
        "ë¹„ëˆ„", "ì†Œ", "ì½”", "ì´ˆ", "í† ë§ˆí† ", "í”¼ì•„ë…¸", "ì–´ë¨¸ë‹ˆ", "ì•„ë²„ì§€", "ê³ êµ¬ë§ˆ"
      ],
      normal: [ // ë°›ì¹¨ ìˆëŠ” ë‹¨ì–´, ì¼ìƒ ëª…ì‚¬
        "í•™êµ", "ì„ ìƒë‹˜", "ì¹œêµ¬", "ê°€ë°©", "ì±…ìƒ", "ì—°í•„", "ì§€ìš°ê°œ", "ìš´ë™ì¥", "ê¸‰ì‹",
        "ë™ë¬¼ì›", "í˜¸ë‘ì´", "ì½”ë¼ë¦¬", "ê¸°ë¦°", "ì›ìˆ­ì´", "ë¹„í–‰ê¸°", "ìë™ì°¨", "ìì „ê±°",
        "ì»´í“¨í„°", "íœ´ëŒ€í°", "í…”ë ˆë¹„ì „", "ëƒ‰ì¥ê³ ", "ì„¸íƒê¸°", "ë¬´ì§€ê°œ", "ëˆˆì‚¬ëŒ", "í¬ë¦¬ìŠ¤ë§ˆìŠ¤",
        "ë–¡ë³¶ì´", "ê¹€ë°¥", "ë¼ë©´", "ì¹˜í‚¨", "í–„ë²„ê±°"
      ],
      hard: [ // ê¸´ ë‹¨ì–´, ê²¹ë°›ì¹¨, ë³µì¡í•œ ë‹¨ì–´
        "ëŒ€í•œë¯¼êµ­", "ì†Œë°©ê´€", "ê²½ì°°ê´€", "ëŒ€í†µë ¹", "êµ­íšŒì˜ì›", "í• ì•„ë²„ì§€", "í• ë¨¸ë‹ˆ",
        "ì¼ê¸°ì˜ˆë³´", "êµí†µì‚¬ê³ ", "íš¡ë‹¨ë³´ë„", "í¸ì˜ì ", "ì•„ì´ìŠ¤í¬ë¦¼", "ì´ˆì½œë¦¿", "ìŠ¤íŒŒê²Œí‹°",
        "ìŠ¤í…Œì´í¬", "í‹°ë¼ë…¸ì‚¬ìš°ë£¨ìŠ¤", "íŠ¸ë¦¬ì¼€ë¼í†±ìŠ¤", "ë°±ê³¼ì‚¬ì „", "ë¶ê·¹ê³°", "í­ê·„",
        "í—¬ë¦¬ì½¥í„°", "ì ìˆ˜í•¨", "ìš°ì£¼ë¹„í–‰ì‚¬", "ì¸ê³µì§€ëŠ¥", "ë¡œë´‡ì²­ì†Œê¸°", "ìŠ¤ë§ˆíŠ¸í°", "ìœ íŠœë¸Œ",
        "íƒœê¶Œë„", "ì¤„ë„˜ê¸°", "ìˆ¨ë°”ê¼­ì§ˆ"
      ]
    };

    // === ê·€ì—¬ìš´ UFO/ì™¸ê³„ì¸ SVG ìƒì„± í•¨ìˆ˜ ===
    function getAlienSVG(color) {
      // ìƒ‰ìƒ ëœë¤ íŒŒìŠ¤í…”í†¤
      const colors = ['#ff7675', '#74b9ff', '#55efc4', '#a29bfe', '#ffeaa7', '#fab1a0'];
      const bodyColor = color || colors[Math.floor(Math.random() * colors.length)];

      return `
      <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <!-- ë¹› -->
        <ellipse cx="50" cy="85" rx="30" ry="10" fill="rgba(255,255,255,0.2)" />
        <!-- ë‹¤ë¦¬ -->
        <path d="M30 70 L20 90 M70 70 L80 90 M50 75 L50 95" stroke="${bodyColor}" stroke-width="5" stroke-linecap="round"/>
        <!-- ëª¸í†µ -->
        <path d="M20 50 Q20 20 50 20 Q80 20 80 50 Q80 80 50 80 Q20 80 20 50" fill="${bodyColor}" stroke="#fff" stroke-width="2"/>
        <!-- ëˆˆ -->
        <circle cx="35" cy="45" r="5" fill="#333" />
        <circle cx="65" cy="45" r="5" fill="#333" />
        <circle cx="37" cy="43" r="1.5" fill="#fff" />
        <circle cx="67" cy="43" r="1.5" fill="#fff" />
        <!-- ì… -->
        <path d="M45 55 Q50 60 55 55" stroke="#333" stroke-width="2" fill="none" />
        <!-- ì•ˆí…Œë‚˜ -->
        <path d="M50 20 L50 5" stroke="${bodyColor}" stroke-width="3" />
        <circle cx="50" cy="5" r="4" fill="${colors[Math.floor(Math.random() * colors.length)]}" />
      </svg>
    `;
    }

    // === ê²Œì„ ë³€ìˆ˜ ===
    let currentLevel = 'easy';
    let score = 0;
    let lives = 5;
    let isPlaying = false;
    let enemies = []; // { id, el, x, y, speed, text }
    let lastTime = 0;
    let spawnTimer = 0;
    let spawnInterval = 2000;
    let baseSpeed = 1;
    let wordList = [];

    // DOM
    const gameArea = document.getElementById('game-area');
    const inputBox = document.getElementById('input-box');
    const scoreEl = document.getElementById('score');
    const livesEl = document.getElementById('lives');
    const levelDisplay = document.getElementById('level-display');
    const startScreen = document.getElementById('start-screen');
    const gameoverScreen = document.getElementById('gameover-screen');
    const finalScoreMsg = document.getElementById('final-score-msg');

    // === ê²Œì„ ë¡œì§ ===

    function startGame(level) {
      currentLevel = level;
      wordList = [...WORDS[level]]; // ë‹¨ì–´ ë³µì‚¬

      // ë‚œì´ë„ë³„ ì„¤ì •
      if (level === 'easy') { baseSpeed = 0.8; spawnInterval = 2500; levelDisplay.innerText = "ì‰¬ì›€"; }
      else if (level === 'normal') { baseSpeed = 1.2; spawnInterval = 2000; levelDisplay.innerText = "ë³´í†µ"; }
      else { baseSpeed = 1.8; spawnInterval = 1500; levelDisplay.innerText = "ì–´ë ¤ì›€"; }

      // ì´ˆê¸°í™”
      score = 0;
      lives = 5;
      enemies = [];
      gameArea.innerHTML = '';
      updateUI();

      startScreen.classList.add('hidden');
      gameoverScreen.classList.add('hidden');
      isPlaying = true;

      inputBox.value = '';
      inputBox.focus();

      lastTime = performance.now();
      requestAnimationFrame(gameLoop);
    }

    function resetGame() {
      gameoverScreen.classList.add('hidden');
      startScreen.classList.remove('hidden');
    }

    function createEnemy() {
      const text = wordList[Math.floor(Math.random() * wordList.length)];
      const el = document.createElement('div');
      el.className = 'enemy';
      el.innerHTML = getAlienSVG() + `<div class="enemy-text">${text}</div>`;

      // ëœë¤ ìœ„ì¹˜ (ì¢Œìš° ì—¬ë°± ê³ ë ¤)
      const maxWidth = gameArea.clientWidth - 100;
      const x = Math.random() * maxWidth + 20;

      el.style.left = x + 'px';
      el.style.top = '-100px'; // í™”ë©´ ìœ„ì—ì„œ ì‹œì‘

      gameArea.appendChild(el);

      enemies.push({
        id: Date.now() + Math.random(),
        el: el,
        x: x,
        y: -100,
        text: text,
        speed: baseSpeed + (Math.random() * 0.5) // ì†ë„ ì•½ê°„ ëœë¤
      });
    }

    function gameLoop(timestamp) {
      if (!isPlaying) return;

      const dt = timestamp - lastTime;
      lastTime = timestamp;

      // 1. ì  ìƒì„±
      spawnTimer += dt;
      if (spawnTimer > spawnInterval) {
        createEnemy();
        spawnTimer = 0;
        // ì‹œê°„ì´ ê°ˆìˆ˜ë¡ ì¡°ê¸ˆì”© ë¹¨ë¼ì§ (ìµœëŒ€ì¹˜ ì œí•œ)
        spawnInterval = Math.max(800, spawnInterval - 10);
      }

      // 2. ì  ì´ë™ ë° ì¶©ëŒ ì²´í¬
      const areaHeight = gameArea.clientHeight;

      // ì—­ìˆœìœ¼ë¡œ ìˆœíšŒ (ì‚­ì œ ì‹œ ì¸ë±ìŠ¤ ì˜¤ë¥˜ ë°©ì§€)
      for (let i = enemies.length - 1; i >= 0; i--) {
        let enemy = enemies[i];
        enemy.y += enemy.speed * (dt / 16);
        enemy.el.style.top = enemy.y + 'px';

        // ë°”ë‹¥ì— ë‹¿ìŒ
        if (enemy.y > areaHeight - 80) {
          // ìƒëª… ê°ì†Œ íš¨ê³¼
          triggerExplosion(enemy.x, areaHeight - 50, "ğŸ’¢");
          gameArea.style.boxShadow = "inset 0 -20px 50px rgba(255,0,0,0.5)";
          setTimeout(() => gameArea.style.boxShadow = "", 200);

          removeEnemy(i);
          lives--;
          updateUI();

          if (lives <= 0) {
            gameOver();
            return;
          }
        }
      }

      requestAnimationFrame(gameLoop);
    }

    function removeEnemy(index) {
      const enemy = enemies[index];
      if (enemy && enemy.el.parentNode) {
        enemy.el.remove();
      }
      enemies.splice(index, 1);
    }

    function triggerExplosion(x, y, char = "ğŸ’¥") {
      const el = document.createElement('div');
      el.className = 'explosion';
      el.innerText = char;
      el.style.left = x + 'px';
      el.style.top = y + 'px';
      gameArea.appendChild(el);
      setTimeout(() => el.remove(), 500);
    }

    function gameOver() {
      isPlaying = false;
      finalScoreMsg.innerText = `ìµœì¢… ì ìˆ˜: ${score}ì `;
      gameoverScreen.classList.remove('hidden');
    }

    function updateUI() {
      scoreEl.innerText = score;
      let heartStr = "";
      for (let i = 0; i < lives; i++) heartStr += "â¤";
      livesEl.innerText = heartStr;
    }

    function focusInput() {
      if (isPlaying) inputBox.focus();
    }

    // === ì…ë ¥ ì²˜ë¦¬ ===
    inputBox.addEventListener('keydown', (e) => {
      // í‚¤ë³´ë“œ ì‹œê° íš¨ê³¼
      const keyEl = document.querySelector(`.key[data-key="${e.key.toLowerCase()}"]`);
      if (keyEl) {
        keyEl.classList.add('active');
        setTimeout(() => keyEl.classList.remove('active'), 150);
      }

      if (e.key === 'Enter') {
        checkInput();
      }
    });

    function checkInput() {
      const text = inputBox.value.trim();
      if (!text) return;

      let matchedIdx = -1;
      let maxY = -9999; // ê°€ì¥ ì•„ë˜(ìœ„í—˜í•œ) ë…€ì„ë¶€í„° ì°¾ê¸°

      for (let i = 0; i < enemies.length; i++) {
        if (enemies[i].text === text) {
          if (enemies[i].y > maxY) {
            maxY = enemies[i].y;
            matchedIdx = i;
          }
        }
      }

      if (matchedIdx !== -1) {
        // ì •ë‹µ
        const enemy = enemies[matchedIdx];
        triggerExplosion(enemy.x + 20, enemy.y + 20, "âœ¨");
        removeEnemy(matchedIdx);
        score += 10;
        updateUI();
        inputBox.value = '';
      } else {
        // ì˜¤ë‹µ
        inputBox.style.borderColor = "#ff4757";
        setTimeout(() => inputBox.style.borderColor = "var(--neon-blue)", 200);
        inputBox.value = '';
      }
    }

  </script>
</body>

</html>