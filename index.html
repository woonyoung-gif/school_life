<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìš°ë¦¬ í•™êµ ë°”ë¥¸ ìƒí™œ ì§€í‚´ì´</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Jua&display=swap" rel="stylesheet">
  <style>
    /* CSS ìŠ¤íƒ€ì¼ ì‹œì‘ */
    :root {
      --bg-color: #ffeaa7;
      --board-color: #2d3436;
      --board-border: #b2bec3;
      --accent-green: #00b894;
      --accent-red: #ff7675;
    }
    * { box-sizing: border-box; user-select: none; }
    body {
      margin: 0; padding: 0;
      background: radial-gradient(circle, #ffeaa7 0%, #fab1a0 100%);
      font-family: 'Jua', sans-serif;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      overflow: hidden;
    }
    .bg-deco {
      position: absolute; font-size: 80px; opacity: 0.15; z-index: 0;
      animation: float 6s ease-in-out infinite;
    }
    @keyframes float { 0%, 100% {transform: translateY(0) rotate(0);} 50% {transform: translateY(-20px) rotate(10deg);} }
    header {
      z-index: 10;
      width: 100%; max-width: 600px;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(255,255,255,0.4);
      border-radius: 0 0 20px 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .score-box { font-size: 24px; color: #d63031; text-shadow: 1px 1px 0 #fff; }
    .timer-box { 
      font-size: 24px; color: #0984e3; text-shadow: 1px 1px 0 #fff; 
      display: flex; align-items: center; gap: 5px;
    }
    .timer-bar-bg {
      position: absolute; top: 0; left: 0; width: 100%; height: 8px;
      background: rgba(255,255,255,0.5);
    }
    .timer-bar-fill {
      height: 100%; width: 100%;
      background: linear-gradient(90deg, #00b894, #00cec9);
      transition: width 0.1s linear;
    }
    #game-container {
      position: relative; z-index: 5;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 100%; max-width: 500px;
      padding: 20px;
    }
    .question-card {
      width: 100%;
      background: var(--board-color);
      border: 8px solid var(--board-border);
      border-radius: 20px;
      padding: 30px 20px;
      text-align: center;
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
      margin-bottom: 30px;
      position: relative;
      transition: transform 0.3s;
    }
    .question-icon { font-size: 80px; margin-bottom: 10px; display: block; }
    .question-text {
      color: #fff;
      font-family: 'Gaegu', cursive;
      font-size: 32px;
      line-height: 1.4;
    }
    .btn-container {
      display: flex; gap: 20px; width: 100%;
    }
    .answer-btn {
      flex: 1;
      height: 120px;
      border: none; border-radius: 20px;
      font-family: 'Jua', sans-serif;
      font-size: 60px;
      cursor: pointer;
      transition: transform 0.1s, box-shadow 0.1s;
      box-shadow: 0 8px 0 rgba(0,0,0,0.2);
      display: flex; flex-direction: column; justify-content: center; align-items: center;
    }
    .answer-btn span { font-size: 20px; margin-top: 5px; }
    .btn-o { background: #00b894; color: #fff; border: 4px solid #55efc4; }
    .btn-x { background: #ff7675; color: #fff; border: 4px solid #fab1a0; }
    .btn-o:active, .btn-x:active {
      transform: translateY(4px); box-shadow: 0 4px 0 rgba(0,0,0,0.2);
    }
    .feedback {
      position: absolute; top: 40%; left: 50%;
      transform: translate(-50%, -50%) scale(0);
      font-size: 150px; font-weight: bold;
      pointer-events: none; z-index: 20;
      text-shadow: 0 5px 20px rgba(0,0,0,0.3);
    }
    .feedback.correct { color: #00b894; animation: popUp 0.5s forwards; }
    .feedback.wrong { color: #d63031; animation: popUp 0.5s forwards; }
    @keyframes popUp {
      0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
      50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
      100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
    }
    .overlay {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
      backdrop-filter: blur(5px);
      z-index: 100;
      display: flex; flex-direction: column; justify-content: center; align-items: center;
      text-align: center;
    }
    .modal {
      background: #fff; padding: 40px; border-radius: 30px;
      max-width: 90%; width: 400px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      animation: bounceIn 0.5s;
      border: 5px solid #fdcb6e;
    }
    .modal h2 { font-size: 32px; color: #e17055; margin: 0 0 20px; }
    .modal p { font-size: 18px; color: #636e72; margin-bottom: 30px; line-height: 1.6; }
    .start-btn {
      background: linear-gradient(to bottom, #0984e3, #74b9ff);
      color: #fff; font-size: 24px; border: none; padding: 15px 40px;
      border-radius: 50px; cursor: pointer;
      font-family: 'Jua', sans-serif;
      box-shadow: 0 5px 15px rgba(9, 132, 227, 0.4);
      transition: transform 0.2s;
    }
    .start-btn:hover { transform: scale(1.05); }
    .combo-text {
      position: absolute; top: 110px; right: 20px;
      font-size: 20px; color: #e84393; font-weight: bold;
      opacity: 0; transition: opacity 0.2s;
    }
    .combo-text.show { opacity: 1; animation: bounce 0.5s infinite; }
    @keyframes bounceIn { from{transform: scale(0.8); opacity:0;} to{transform: scale(1); opacity:1;} }
    @keyframes bounce { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-5px);} }
    .hidden { display: none !important; }
  </style>
</head>
<body>
  <div class="bg-deco" style="top: 10%; left: 5%;">ğŸ«</div>
  <div class="bg-deco" style="top: 20%; right: 10%; animation-delay: 1s;">âœï¸</div>
  <div class="bg-deco" style="top: 60%; left: 15%; animation-delay: 2s;">ğŸ’</div>
  <div class="bg-deco" style="bottom: 10%; right: 5%; animation-delay: 3s;">âš½</div>

  <div class="timer-bar-bg"><div class="timer-bar-fill" id="timer-bar"></div></div>

  <header>
    <div class="timer-box">â° <span id="time-left">60</span>ì´ˆ</div>
    <div class="score-box">â­ ì ìˆ˜: <span id="score">0</span></div>
  </header>
  
  <div class="combo-text" id="combo-display">ğŸ”¥ 5 ì½¤ë³´!</div>

  <div id="game-container">
    <div class="question-card" id="card">
      <span class="question-icon" id="q-icon">ğŸ¤”</span>
      <div class="question-text" id="q-text">ì¤€ë¹„ëë‚˜ìš”?</div>
    </div>
    <div class="btn-container">
      <button class="answer-btn btn-o" onclick="checkAnswer(true)">
        O <span>ì¢‹ì•„ìš”!</span>
      </button>
      <button class="answer-btn btn-x" onclick="checkAnswer(false)">
        X <span>ì•ˆë¼ìš”!</span>
      </button>
    </div>
  </div>

  <div id="feedback-effect" class="feedback"></div>

  <div id="start-screen" class="overlay">
    <div class="modal">
      <h2>ğŸ« í•™êµ ìƒí™œ í€´ì¦ˆ</h2>
      <p>í•™êµì—ì„œ ì§€ì¼œì•¼ í•  ë°”ë¥¸ í–‰ë™(O)ê³¼<br>í•˜ë©´ ì•ˆ ë˜ëŠ” í–‰ë™(X)ì„<br>êµ¬ë¶„í•´ì£¼ì„¸ìš”!</p>
      <button class="start-btn" onclick="startGame()">ë“±êµí•˜ê¸° (ì‹œì‘)</button>
    </div>
  </div>

  <div id="end-screen" class="overlay hidden">
    <div class="modal">
      <h2>ğŸ”” ìˆ˜ì—… ë!</h2>
      <p id="result-msg">ì˜¤ëŠ˜ì˜ ì ìˆ˜ëŠ”?</p>
      <button class="start-btn" onclick="startGame()">ë‹¤ì‹œ ë“±êµí•˜ê¸°</button>
    </div>
  </div>

<script>
  const HABITS = [
    { text: "ì„ ìƒë‹˜ì„ ë§Œë‚˜ë©´\në°°ê¼½ ì¸ì‚¬í•˜ê¸°", isGood: true, icon: "ğŸ™‡" },
    { text: "ë³µë„ì—ì„œ\nìš°ë‹¹íƒ•íƒ• ë›°ê¸°", isGood: false, icon: "ğŸƒ" },
    { text: "ì¹œêµ¬ê°€ ì´ì•¼ê¸°í•  ë•Œ\nê·€ ê¸°ìš¸ì—¬ ë“£ê¸°", isGood: true, icon: "ğŸ‘‚" },
    { text: "ìˆ˜ì—… ì‹œê°„ì—\nëŒì•„ë‹¤ë‹ˆê¸°", isGood: false, icon: "ğŸ¤ª" },
    { text: "ì“°ë ˆê¸°ëŠ”\nì“°ë ˆê¸°í†µì— ë²„ë¦¬ê¸°", isGood: true, icon: "ğŸ—‘ï¸" },
    { text: "ì±…ìƒì— íœìœ¼ë¡œ\në‚™ì„œí•˜ê¸°", isGood: false, icon: "ğŸ–ï¸" },
    { text: "ì¤€ë¹„ë¬¼ì„\në¯¸ë¦¬ë¯¸ë¦¬ ì±™ê¸°ê¸°", isGood: true, icon: "ğŸ’" },
    { text: "ì¹œêµ¬ë¥¼ ë³„ëª…ìœ¼ë¡œ\në†€ë¦¬ê¸°", isGood: false, icon: "ğŸ˜" },
    { text: "ê¸‰ì‹ ì‹œê°„ì—\nì°¨ë¡€ì°¨ë¡€ ì¤„ ì„œê¸°", isGood: true, icon: "ğŸ›" },
    { text: "ê³„ë‹¨ì—ì„œ\nì¥ë‚œì¹˜ë©° ë°€ê¸°", isGood: false, icon: "ğŸ˜±" },
    { text: "ë„ì„œê´€ì—ì„œëŠ”\nì¡°ìš©íˆ ì±… ì½ê¸°", isGood: true, icon: "ğŸ“–" },
    { text: "í™”ì¥ì‹¤ ë¬¸\në°œë¡œ ì°¨ê¸°", isGood: false, icon: "ğŸšª" },
    { text: "ì¹œêµ¬ê°€ ë„˜ì–´ì§€ë©´\nì¼ìœ¼ì¼œ ì£¼ê¸°", isGood: true, icon: "ğŸ¤" },
    { text: "ì¹ íŒ ì§€ìš°ê°œë¡œ\nì¥ë‚œì¹˜ê¸°", isGood: false, icon: "ğŸŒ«ï¸" },
    { text: "ì•„ì¹¨ì— ì§€ê°í•˜ì§€\nì•Šê³  ì˜¤ê¸°", isGood: true, icon: "â°" },
    { text: "ì§ê¿ ë¬¼ê±´\ní—ˆë½ ì—†ì´ ì“°ê¸°", isGood: false, icon: "âœï¸" },
    { text: "ê³ ìš´ ë§\në°”ë¥¸ ë§ ì“°ê¸°", isGood: true, icon: "ğŸ’¬" },
    { text: "êµì‹¤ì—ì„œ\nê³µ ì°¨ê¸°", isGood: false, icon: "âš½" }
  ];

  let score = 0;
  let timeLeft = 60;
  let timerId = null;
  let currentHabit = null;
  let combo = 0;
  let isPlaying = false;

  const qText = document.getElementById('q-text');
  const qIcon = document.getElementById('q-icon');
  const scoreEl = document.getElementById('score');
  const timeEl = document.getElementById('time-left');
  const timerBar = document.getElementById('timer-bar');
  const feedbackEl = document.getElementById('feedback-effect');
  const comboEl = document.getElementById('combo-display');
  const startScreen = document.getElementById('start-screen');
  const endScreen = document.getElementById('end-screen');
  const resultMsg = document.getElementById('result-msg');
  const cardEl = document.getElementById('card');

  function startGame() {
    score = 0; timeLeft = 60; combo = 0; isPlaying = true;
    scoreEl.innerText = 0; timeEl.innerText = 60; timerBar.style.width = '100%';
    comboEl.classList.remove('show');
    startScreen.classList.add('hidden'); endScreen.classList.add('hidden');
    nextCard();
    if(timerId) clearInterval(timerId);
    timerId = setInterval(updateTimer, 1000);
  }

  function updateTimer() {
    timeLeft--;
    timeEl.innerText = timeLeft;
    timerBar.style.width = `${(timeLeft / 60) * 100}%`;
    if (timeLeft <= 10) timerBar.style.background = 'linear-gradient(90deg, #ff7675, #d63031)';
    else timerBar.style.background = 'linear-gradient(90deg, #00b894, #00cec9)';
    if (timeLeft <= 0) gameOver();
  }

  function nextCard() {
    currentHabit = HABITS[Math.floor(Math.random() * HABITS.length)];
    cardEl.style.transform = "scale(0.95)";
    setTimeout(() => cardEl.style.transform = "scale(1)", 100);
    qText.innerHTML = currentHabit.text.replace(/\n/g, '<br>');
    qIcon.innerText = currentHabit.icon;
  }

  function checkAnswer(userChoice) {
    if (!isPlaying) return;
    processResult(userChoice === currentHabit.isGood);
    nextCard();
  }

  function processResult(isCorrect) {
    feedbackEl.className = 'feedback';
    void feedbackEl.offsetWidth;
    if (isCorrect) {
      feedbackEl.innerText = "â­•"; feedbackEl.classList.add('correct');
      combo++;
      score += (10 + Math.floor(combo / 3) * 5);
      if (combo >= 3) { comboEl.innerText = `ğŸ”¥ ${combo} ì½¤ë³´!`; comboEl.classList.add('show'); }
    } else {
      feedbackEl.innerText = "âŒ"; feedbackEl.classList.add('wrong');
      combo = 0; comboEl.classList.remove('show');
      timeLeft = Math.max(0, timeLeft - 3); timeEl.innerText = timeLeft;
      document.body.style.transform = "translateX(-5px)";
      setTimeout(() => document.body.style.transform = "translateX(5px)", 50);
      setTimeout(() => document.body.style.transform = "translateX(0)", 100);
    }
    scoreEl.innerText = score;
  }

  function gameOver() {
    isPlaying = false; clearInterval(timerId);
    let rank = "ë³‘ì•„ë¦¬ í•™ìƒ ğŸ£";
    if (score >= 400) rank = "í•™êµì˜ ì „ì„¤ ğŸ‘‘";
    else if (score >= 250) rank = "ëª¨ë²”ìƒ ğŸ‘¨â€ğŸ“";
    else if (score >= 100) rank = "ì„±ì‹¤í•œ í•™ìƒ ğŸ˜‰";
    resultMsg.innerHTML = `ìµœì¢… ì ìˆ˜: <b style="color:#e17055; font-size:28px;">${score}ì </b><br>ë‚˜ì˜ ë“±ê¸‰: <b>${rank}</b>`;
    endScreen.classList.remove('hidden');
  }

  window.addEventListener('keydown', (e) => {
    if (!isPlaying) return;
    if (e.key === 'ArrowLeft') checkAnswer(true);
    if (e.key === 'ArrowRight') checkAnswer(false);
  });
</script>
</body>
</html>
